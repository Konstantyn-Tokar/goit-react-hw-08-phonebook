(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{101:function(t,e,n){},102:function(t,e,n){"use strict";n.r(e);var r,c,a,u=n(1),i=n.n(u),s=n(19),o=n.n(s),l=n(21),b=n(59),j=n(9),d=n(24),f=n(60),h=n.n(f),p=n(4),O=n(38),v=n(10),g=n(46),x=n(16),m=Object(j.d)([],(r={},Object(p.a)(r,x.c.fulfilled,(function(t,e){return e.payload})),Object(p.a)(r,x.a.fulfilled,(function(t,e){return[].concat(Object(O.a)(t),[e.payload])})),Object(p.a)(r,x.b.fulfilled,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),k=Object(j.d)("",Object(p.a)({},g.a,(function(t,e){return e.payload}))),y=Object(j.d)(!1,(c={},Object(p.a)(c,x.c.pending,(function(){return!0})),Object(p.a)(c,x.c.fulfilled,(function(){return!1})),Object(p.a)(c,x.c.rejected,(function(){return!1})),Object(p.a)(c,x.a.pending,(function(){return!0})),Object(p.a)(c,x.a.fulfilled,(function(){return!1})),Object(p.a)(c,x.a.rejected,(function(){return!1})),Object(p.a)(c,x.b.pending,(function(){return!0})),Object(p.a)(c,x.b.fulfilled,(function(){return!1})),Object(p.a)(c,x.b.rejected,(function(){return!1})),c)),w=Object(v.b)({items:m,filter:k,loading:y}),R=n(22),L=Object(j.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshing:!1},extraReducers:(a={},Object(p.a)(a,R.d.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(p.a)(a,R.b.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(p.a)(a,R.c.fulfilled,(function(t){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(p.a)(a,R.a.pending,(function(t){t.isRefreshing=!0})),Object(p.a)(a,R.a.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isRefreshing=!1})),Object(p.a)(a,R.a.rejected,(function(t){t.isRefreshing=!1})),a)}).reducer,I={key:"auth",storage:h.a,whitelist:["token"]},z=Object(j.a)({reducer:{auth:Object(d.g)(I,L),contacts:w},middleware:function(t){return t({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})},devTools:!1}),B=Object(d.h)(z),T=n(12),C=(n(94),n(95),n(7)),W=function(t){return t.auth.isLoggedIn},N=function(t){return t.auth.user.name},S=function(t){return t.auth.isRefreshing},V=n(39),A=n(57),E=n(63),F=n.p+"static/media/default-avatar.0c5bf84e.png",J=n(55),P=n(2),U={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}};function M(){var t=Object(T.b)(),e=Object(T.c)(N),n=F;return Object(P.jsxs)("div",{style:U.container,children:[Object(P.jsx)("img",{src:n,alt:"",width:"32",style:U.avatar}),Object(P.jsxs)("span",{style:U.name,children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",e]}),Object(P.jsx)(J.a,{type:"button",variant:"outline-secondary",className:"mx-6",onClick:function(){return t(Object(R.c)())},children:"\u0412\u044b\u0439\u0442\u0438"})]})}function q(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.b,{to:"/register",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(P.jsx)(l.b,{to:"/login",children:"\u041b\u043e\u0433\u0438\u043d"})]})}function D(){var t=Object(T.c)(W);return Object(P.jsx)(V.a,{bg:"dark",variant:"dark",children:Object(P.jsxs)(A.a,{children:[Object(P.jsxs)(V.a.Brand,{className:"navBar",children:[Object(P.jsx)(E.a,{className:"navBar-logo"}),Object(P.jsx)(l.b,{to:"/",children:"Phonebook"}),t&&Object(P.jsx)(l.b,{to:"/contacts",children:"Contacts"})]}),Object(P.jsx)(V.a.Brand,{className:"navBar",children:t?Object(P.jsx)(M,{}):Object(P.jsx)(q,{})})]})})}var G=n(3),H=n(5),K=["children","restrictedTo","restricted"];function Q(t){var e=t.children,n=t.restrictedTo,r=void 0===n?"/":n,c=(t.restricted,Object(H.a)(t,K)),a=Object(T.c)(W);return Object(P.jsx)(C.b,Object(G.a)(Object(G.a)({},c),{},{children:a?e:Object(P.jsx)(C.a,{to:r})}))}var X=["children","restrictedTo","restricted"];function Y(t){var e=t.children,n=t.restrictedTo,r=void 0===n?"/":n,c=t.restricted,a=void 0!==c&&c,u=Object(H.a)(t,X),i=Object(T.c)(W)&&a;return Object(P.jsx)(C.b,Object(G.a)(Object(G.a)({},u),{},{children:i?Object(P.jsx)(C.a,{to:r}):e}))}var Z=Object(u.lazy)((function(){return n.e(5).then(n.bind(null,130))})),$=Object(u.lazy)((function(){return n.e(7).then(n.bind(null,131))})),_=Object(u.lazy)((function(){return n.e(6).then(n.bind(null,132))})),tt=Object(u.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,133))}));var et=function(){var t=Object(T.b)(),e=Object(T.c)(S);return Object(u.useEffect)((function(){t(Object(R.a)())}),[t]),!e&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(D,{}),Object(P.jsx)(u.Suspense,{fallback:Object(P.jsx)("p",{children:"Loadind"}),children:Object(P.jsxs)(C.d,{children:[Object(P.jsx)(Y,{exact:!0,path:"/",children:Object(P.jsx)(Z,{})}),Object(P.jsx)(Y,{path:"/register",restricted:!0,children:Object(P.jsx)($,{})}),Object(P.jsx)(Y,{path:"/login",restrictedTo:"/contacts",restricted:!0,children:Object(P.jsx)(_,{})}),Object(P.jsx)(Q,{path:"/contacts",restrictedTo:"/login",children:Object(P.jsx)(tt,{})})]})})]})};n(101);o.a.render(Object(P.jsx)(i.a.StrictMode,{children:Object(P.jsx)(T.a,{store:z,children:Object(P.jsx)(b.a,{loading:null,persistor:B,children:Object(P.jsx)(l.a,{children:Object(P.jsx)(et,{})})})})}),document.getElementById("root"))},16:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return b}));var r=n(11),c=n.n(r),a=n(23),u=n(18),i=n.n(u),s=n(9);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=Object(s.c)("contact/fatchContacts",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.get("/contacts");case 4:return a=t.sent,u=a.data,t.abrupt("return",u);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),l=Object(s.c)("contact/addContacts",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.post("/contacts",e);case 4:return a=t.sent,u=a.data,t.abrupt("return",u);case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()),b=Object(s.c)("contact/deleteContacts",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,i.a.delete("/contacts/".concat(e));case 4:return t.abrupt("return",e);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}())},22:function(t,e,n){"use strict";n.d(e,"d",(function(){return b})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return f}));var r=n(11),c=n.n(r),a=n(23),u=n(18),i=n.n(u),s=n(9);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=function(t){i.a.defaults.headers.common.Authorization="Bearer ".concat(t)},l=function(){i.a.defaults.headers.common.Authorization=""},b=Object(s.c)("auth/register",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/signup",e);case 3:return n=t.sent,r=n.data,o(r.token),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),j=Object(s.c)("auth/login",function(){var t=Object(a.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/login",e);case 3:return n=t.sent,r=n.data,o(r.token),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),d=Object(s.c)("auth/logout",Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/users/logout");case 3:l(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),f=Object(s.c)("auth/refresh",function(){var t=Object(a.a)(c.a.mark((function t(e,n){var r,a,u,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return o(a),t.prev=5,t.next=8,i.a.get("/users/current");case 8:return u=t.sent,s=u.data,t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(5),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},46:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(9),c=Object(r.b)("contact/filter")},94:function(t,e,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.f5bf2247.chunk.js.map